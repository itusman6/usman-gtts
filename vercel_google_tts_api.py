from flask import Flask, request, send_file, jsonify
from flask_cors import CORS
import edge_tts
import asyncio
import tempfile
import os

app = Flask(__name__)
CORS(app)

VOICES = {
    "af_za_adri3_female": "af-ZA-AdriNeural3",
    "af_za_willem3_male": "af-ZA-WillemNeural3",
    "am_et_mekdes3_female": "am-ET-MekdesNeural3",
    "am_et_ameha3_male": "am-ET-AmehaNeural3",
    "ar_ae_fatima_female": "ar-AE-FatimaNeural",
    "ar_ae_hamdan_male": "ar-AE-HamdanNeural",
    "ar_bh_laila_female": "ar-BH-LailaNeural",
    "ar_bh_ali_male": "ar-BH-AliNeural",
    "ar_dz_amina_female": "ar-DZ-AminaNeural",
    "ar_dz_ismael_male": "ar-DZ-IsmaelNeural",
    "ar_eg_salma_female": "ar-EG-SalmaNeural",
    "ar_eg_shakir_male": "ar-EG-ShakirNeural",
    "ar_iq_rana_female": "ar-IQ-RanaNeural",
    "ar_iq_bassel_male": "ar-IQ-BasselNeural",
    "ar_jo_sana_female": "ar-JO-SanaNeural",
    "ar_jo_taim_male": "ar-JO-TaimNeural",
    "ar_kw_noura_female": "ar-KW-NouraNeural",
    "ar_kw_fahed_male": "ar-KW-FahedNeural",
    "ar_lb_layla_female": "ar-LB-LaylaNeural",
    "ar_lb_rami_male": "ar-LB-RamiNeural",
    "ar_ly_iman_female": "ar-LY-ImanNeural",
    "ar_ly_omar_male": "ar-LY-OmarNeural",
    "ar_ma_mouna_female": "ar-MA-MounaNeural",
    "ar_ma_jamal_male": "ar-MA-JamalNeural",
    "ar_om_aysha_female": "ar-OM-AyshaNeural",
    "ar_om_abdullah_male": "ar-OM-AbdullahNeural",
    "ar_qa_amal_female": "ar-QA-AmalNeural",
    "ar_qa_moaz_male": "ar-QA-MoazNeural",
    "ar_sa_zariyah_female": "ar-SA-ZariyahNeural",
    "ar_sa_hamed_male": "ar-SA-HamedNeural",
    "ar_sy_amany_female": "ar-SY-AmanyNeural",
    "ar_sy_laith_male": "ar-SY-LaithNeural",
    "ar_tn_reem_female": "ar-TN-ReemNeural",
    "ar_tn_hedi_male": "ar-TN-HediNeural",
    "ar_ye_maryam_female": "ar-YE-MaryamNeural",
    "ar_ye_saleh_male": "ar-YE-SalehNeural",
    "as_in_yashica3_female": "as-IN-YashicaNeural3",
    "as_in_priyom3_male": "as-IN-PriyomNeural3",
    "az_az_banu3_female": "az-AZ-BanuNeural3",
    "az_az_babek3_male": "az-AZ-BabekNeural3",
    "bg_bg_kalina_female": "bg-BG-KalinaNeural",
    "bg_bg_borislav_male": "bg-BG-BorislavNeural",
    "bn_bd_nabanita3_female": "bn-BD-NabanitaNeural3",
    "bn_bd_pradeep3_male": "bn-BD-PradeepNeural3",
    "bn_in_tanishaa3_female": "bn-IN-TanishaaNeural3",
    "bn_in_bashkar3_male": "bn-IN-BashkarNeural3",
    "bs_ba_vesna3_female": "bs-BA-VesnaNeural3",
    "bs_ba_goran3_male": "bs-BA-GoranNeural3",
    "ca_es_joana_female": "ca-ES-JoanaNeural",
    "ca_es_enric_male": "ca-ES-EnricNeural",
    "ca_es_alba_female": "ca-ES-AlbaNeural",
    "cs_cz_vlasta_female": "cs-CZ-VlastaNeural",
    "cs_cz_antonin_male": "cs-CZ-AntoninNeural",
    "cy_gb_nia3_female": "cy-GB-NiaNeural3",
    "cy_gb_aled3_male": "cy-GB-AledNeural3",
    "da_dk_christel_female": "da-DK-ChristelNeural",
    "da_dk_jeppe_male": "da-DK-JeppeNeural",
    "de_at_ingrid_female": "de-AT-IngridNeural",
    "de_at_jonas_male": "de-AT-JonasNeural",
    "de_ch_leni_female": "de-CH-LeniNeural",
    "de_ch_jan_male": "de-CH-JanNeural",
    "de_de_katja_female": "de-DE-KatjaNeural",
    "de_de_conrad_male": "de-DE-ConradNeural",
    "de_de_seraphinamultilingual4_female": "de-DE-SeraphinaMultilingualNeural4",
    "de_de_florianmultilingual4_male": "de-DE-FlorianMultilingualNeural4",
    "de_de_amala_female": "de-DE-AmalaNeural",
    "de_de_bernd_male": "de-DE-BerndNeural",
    "de_de_christoph_male": "de-DE-ChristophNeural",
    "de_de_elke_female": "de-DE-ElkeNeural",
    "de_de_kasper_male": "de-DE-KasperNeural",
    "de_de_killian_male": "de-DE-KillianNeural",
    "de_de_klarissa_female": "de-DE-KlarissaNeural",
    "de_de_klaus_male": "de-DE-KlausNeural",
    "de_de_louisa_female": "de-DE-LouisaNeural",
    "de_de_maja_female": "de-DE-MajaNeural",
    "de_de_ralf_male": "de-DE-RalfNeural",
    "de_de_tanja_female": "de-DE-TanjaNeural",
    "el_gr_athina_female": "el-GR-AthinaNeural",
    "el_gr_nestoras_male": "el-GR-NestorasNeural",
    "en_au_natasha_female": "en-AU-NatashaNeural",
    "en_au_william_male": "en-AU-WilliamNeural",
    "en_au_williammultilingual4_male": "en-AU-WilliamMultilingualNeural4",
    "en_au_annette_female": "en-AU-AnnetteNeural",
    "en_au_carly_female": "en-AU-CarlyNeural",
    "en_au_darren_male": "en-AU-DarrenNeural",
    "en_au_duncan_male": "en-AU-DuncanNeural",
    "en_au_elsie_female": "en-AU-ElsieNeural",
    "en_au_freya_female": "en-AU-FreyaNeural",
    "en_au_joanne_female": "en-AU-JoanneNeural",
    "en_au_ken_male": "en-AU-KenNeural",
    "en_au_kim_female": "en-AU-KimNeural",
    "en_au_neil_male": "en-AU-NeilNeural",
    "en_au_tim_male": "en-AU-TimNeural",
    "en_au_tina_female": "en-AU-TinaNeural",
    "en_ca_clara_female": "en-CA-ClaraNeural",
    "en_ca_liam_male": "en-CA-LiamNeural",
    "en_gb_sonia_female": "en-GB-SoniaNeural",
    "en_gb_ryan_male": "en-GB-RyanNeural",
    "en_gb_libby_female": "en-GB-LibbyNeural",
    "en_gb_adamultilingual4_female": "en-GB-AdaMultilingualNeural4",
    "en_gb_olliemultilingual4_male": "en-GB-OllieMultilingualNeural4",
    "en_gb_abbi_female": "en-GB-AbbiNeural",
    "en_gb_alfie_male": "en-GB-AlfieNeural",
    "en_gb_bella_female": "en-GB-BellaNeural",
    "en_gb_elliot_male": "en-GB-ElliotNeural",
    "en_gb_ethan_male": "en-GB-EthanNeural",
    "en_gb_hollie_female": "en-GB-HollieNeural",
    "en_gb_noah_male": "en-GB-NoahNeural",
    "en_gb_oliver_male": "en-GB-OliverNeural",
    "en_gb_olivia_female": "en-GB-OliviaNeural",
    "en_gb_thomas_male": "en-GB-ThomasNeural",
    "en_hk_yan_female": "en-HK-YanNeural",
    "en_hk_sam_male": "en-HK-SamNeural",
    "en_ie_emily_female": "en-IE-EmilyNeural",
    "en_ie_connor_male": "en-IE-ConnorNeural",
    "en_in_aartiindic_female": "en-IN-AartiIndicNeural",
    "en_in_arjunindic_male": "en-IN-ArjunIndicNeural",
    "en_in_neerjaindic_female": "en-IN-NeerjaIndicNeural",
    "en_in_prabhatindic_male": "en-IN-PrabhatIndicNeural",
    "en_in_aarav_male": "en-IN-AaravNeural",
    "en_in_aashi_female": "en-IN-AashiNeural",
    "en_in_aarti_female": "en-IN-AartiNeural",
    "en_in_arjun_male": "en-IN-ArjunNeural",
    "en_in_ananya_female": "en-IN-AnanyaNeural",
    "en_in_kavya_female": "en-IN-KavyaNeural",
    "en_in_kunal_male": "en-IN-KunalNeural",
    "en_in_neerja_female": "en-IN-NeerjaNeural",
    "en_in_prabhat_male": "en-IN-PrabhatNeural",
    "en_in_rehaan_male": "en-IN-RehaanNeural",
    "en_ke_asilia_female": "en-KE-AsiliaNeural",
    "en_ke_chilemba_male": "en-KE-ChilembaNeural",
    "en_ng_ezinne_female": "en-NG-EzinneNeural",
    "en_ng_abeo_male": "en-NG-AbeoNeural",
    "en_nz_molly_female": "en-NZ-MollyNeural",
    "en_nz_mitchell_male": "en-NZ-MitchellNeural",
    "en_ph_rosa_female": "en-PH-RosaNeural",
    "en_ph_james_male": "en-PH-JamesNeural",
    "en_sg_luna_female": "en-SG-LunaNeural",
    "en_sg_wayne_male": "en-SG-WayneNeural",
    "en_tz_imani_female": "en-TZ-ImaniNeural",
    "en_tz_elimu_male": "en-TZ-ElimuNeural",
    "en_us_avamultilingual4_female": "en-US-AvaMultilingualNeural4",
    "en_us_andrewmultilingual4_male": "en-US-AndrewMultilingualNeural4",
    "en_us_emmamultilingual4_female": "en-US-EmmaMultilingualNeural4",
    "en_us_alloyturbomultilingual4_male": "en-US-AlloyTurboMultilingualNeural4",
    "en_us_echoturbomultilingual4_male": "en-US-EchoTurboMultilingualNeural4",
    "en_us_onyxturbomultilingual4_male": "en-US-OnyxTurboMultilingualNeural4",
    "en_us_novaturbomultilingual4_female": "en-US-NovaTurboMultilingualNeural4",
    "en_us_shimmerturbomultilingual4_female": "en-US-ShimmerTurboMultilingualNeural4",
    "en_us_brianmultilingual4_male": "en-US-BrianMultilingualNeural4",
    "en_us_ava_female": "en-US-AvaNeural",
    "en_us_andrew_male": "en-US-AndrewNeural",
    "en_us_emma_female": "en-US-EmmaNeural",
    "en_us_brian_male": "en-US-BrianNeural",
    "en_us_jenny_female": "en-US-JennyNeural",
    "en_us_guy_male": "en-US-GuyNeural",
    "en_us_aria_female": "en-US-AriaNeural",
    "en_us_davis_male": "en-US-DavisNeural",
    "en_us_jane_female": "en-US-JaneNeural",
    "en_us_jason_male": "en-US-JasonNeural",
    "en_us_kai_male": "en-US-KaiNeural",
    "en_us_luna_female": "en-US-LunaNeural",
    "en_us_sara_female": "en-US-SaraNeural",
    "en_us_tony_male": "en-US-TonyNeural",
    "en_us_nancy_female": "en-US-NancyNeural",
    "en_us_coramultilingual4_female": "en-US-CoraMultilingualNeural4",
    "en_us_christophermultilingual4_male": "en-US-ChristopherMultilingualNeural4",
    "en_us_brandonmultilingual4_male": "en-US-BrandonMultilingualNeural4",
    "en_us_amber_female": "en-US-AmberNeural",
    "en_us_ashley_female": "en-US-AshleyNeural",
    "en_us_brandon_male": "en-US-BrandonNeural",
    "en_us_christopher_male": "en-US-ChristopherNeural",
    "en_us_cora_female": "en-US-CoraNeural",
    "en_us_elizabeth_female": "en-US-ElizabethNeural",
    "en_us_eric_male": "en-US-EricNeural",
    "en_us_jacob_male": "en-US-JacobNeural",
    "en_us_jennymultilingual4_female": "en-US-JennyMultilingualNeural4",
    "en_us_michelle_female": "en-US-MichelleNeural",
    "en_us_monica_female": "en-US-MonicaNeural",
    "en_us_roger_male": "en-US-RogerNeural",
    "en_us_ryanmultilingual4_male": "en-US-RyanMultilingualNeural4",
    "en_us_steffanmultilingual4_male": "en-US-SteffanMultilingualNeural4",
    "en_us_steffan_male": "en-US-SteffanNeural",
    "en_za_leah_female": "en-ZA-LeahNeural",
    "en_za_luke_male": "en-ZA-LukeNeural",
    "es_ar_elena_female": "es-AR-ElenaNeural",
    "es_ar_tomas_male": "es-AR-TomasNeural",
    "es_bo_sofia_female": "es-BO-SofiaNeural",
    "es_bo_marcelo_male": "es-BO-MarceloNeural",
    "es_cl_catalina_female": "es-CL-CatalinaNeural",
    "es_cl_lorenzo_male": "es-CL-LorenzoNeural",
    "es_co_salome_female": "es-CO-SalomeNeural",
    "es_co_gonzalo_male": "es-CO-GonzaloNeural",
    "es_cr_maria_female": "es-CR-MariaNeural",
    "es_cr_juan_male": "es-CR-JuanNeural",
    "es_cu_belkys_female": "es-CU-BelkysNeural",
    "es_cu_manuel_male": "es-CU-ManuelNeural",
    "es_do_ramona_female": "es-DO-RamonaNeural",
    "es_do_emilio_male": "es-DO-EmilioNeural",
    "es_ec_andrea_female": "es-EC-AndreaNeural",
    "es_ec_luis_male": "es-EC-LuisNeural",
    "es_es_elvira_female": "es-ES-ElviraNeural",
    "es_es_alvaro_male": "es-ES-AlvaroNeural",
    "es_es_arabellamultilingual4_female": "es-ES-ArabellaMultilingualNeural4",
    "es_es_isidoramultilingual4_female": "es-ES-IsidoraMultilingualNeural4",
    "es_es_tristanmultilingual4_male": "es-ES-TristanMultilingualNeural4",
    "es_es_ximenamultilingual4_female": "es-ES-XimenaMultilingualNeural4",
    "es_es_abril_female": "es-ES-AbrilNeural",
    "es_es_arnau_male": "es-ES-ArnauNeural",
    "es_es_dario_male": "es-ES-DarioNeural",
    "es_es_elias_male": "es-ES-EliasNeural",
    "es_es_estrella_female": "es-ES-EstrellaNeural",
    "es_es_irene_female": "es-ES-IreneNeural",
    "es_es_laia_female": "es-ES-LaiaNeural",
    "es_es_lia_female": "es-ES-LiaNeural",
    "es_es_nil_male": "es-ES-NilNeural",
    "es_es_saul_male": "es-ES-SaulNeural",
    "es_es_teo_male": "es-ES-TeoNeural",
    "es_es_triana_female": "es-ES-TrianaNeural",
    "es_es_vera_female": "es-ES-VeraNeural",
    "es_es_ximena_female": "es-ES-XimenaNeural",
    "es_gq_teresa_female": "es-GQ-TeresaNeural",
    "es_gq_javier_male": "es-GQ-JavierNeural",
    "es_gt_marta_female": "es-GT-MartaNeural",
    "es_gt_andres_male": "es-GT-AndresNeural",
    "es_hn_karla_female": "es-HN-KarlaNeural",
    "es_hn_carlos_male": "es-HN-CarlosNeural",
    "es_mx_dalia_female": "es-MX-DaliaNeural",
    "es_mx_jorge_male": "es-MX-JorgeNeural",
    "es_mx_daliamultilingual4_female": "es-MX-DaliaMultilingualNeural4",
    "es_mx_jorgemultilingual4_male": "es-MX-JorgeMultilingualNeural4",
    "es_mx_beatriz_female": "es-MX-BeatrizNeural",
    "es_mx_candela_female": "es-MX-CandelaNeural",
    "es_mx_carlota_female": "es-MX-CarlotaNeural",
    "es_mx_cecilio_male": "es-MX-CecilioNeural",
    "es_mx_gerardo_male": "es-MX-GerardoNeural",
    "es_mx_larissa_female": "es-MX-LarissaNeural",
    "es_mx_liberto_male": "es-MX-LibertoNeural",
    "es_mx_luciano_male": "es-MX-LucianoNeural",
    "es_mx_nuria_female": "es-MX-NuriaNeural",
    "es_mx_pelayo_male": "es-MX-PelayoNeural",
    "es_mx_renata_female": "es-MX-RenataNeural",
    "es_mx_yago_male": "es-MX-YagoNeural",
    "es_ni_yolanda_female": "es-NI-YolandaNeural",
    "es_ni_federico_male": "es-NI-FedericoNeural",
    "es_pa_margarita_female": "es-PA-MargaritaNeural",
    "es_pa_roberto_male": "es-PA-RobertoNeural",
    "es_pe_camila_female": "es-PE-CamilaNeural",
    "es_pe_alex_male": "es-PE-AlexNeural",
    "es_pr_karina_female": "es-PR-KarinaNeural",
    "es_pr_victor_male": "es-PR-VictorNeural",
    "es_py_tania_female": "es-PY-TaniaNeural",
    "es_py_mario_male": "es-PY-MarioNeural",
    "es_sv_lorena_female": "es-SV-LorenaNeural",
    "es_sv_rodrigo_male": "es-SV-RodrigoNeural",
    "es_us_paloma_female": "es-US-PalomaNeural",
    "es_us_alonso_male": "es-US-AlonsoNeural",
    "es_uy_valentina_female": "es-UY-ValentinaNeural",
    "es_uy_mateo_male": "es-UY-MateoNeural",
    "es_ve_paola_female": "es-VE-PaolaNeural",
    "es_ve_sebastian_male": "es-VE-SebastianNeural",
    "et_ee_anu3_female": "et-EE-AnuNeural3",
    "et_ee_kert3_male": "et-EE-KertNeural3",
    "eu_es_ainhoa3_female": "eu-ES-AinhoaNeural3",
    "eu_es_ander3_male": "eu-ES-AnderNeural3",
    "fa_ir_dilara3_female": "fa-IR-DilaraNeural3",
    "fa_ir_farid3_male": "fa-IR-FaridNeural3",
    "fi_fi_selma_female": "fi-FI-SelmaNeural",
    "fi_fi_harri_male": "fi-FI-HarriNeural",
    "fi_fi_noora_female": "fi-FI-NooraNeural",
    "il_ph_blessica3_female": "il-PH-BlessicaNeural3",
    "il_ph_angelo3_male": "il-PH-AngeloNeural3",
    "fr_be_charline_female": "fr-BE-CharlineNeural",
    "fr_be_gerard_male": "fr-BE-GerardNeural",
    "fr_ca_sylvie_female": "fr-CA-SylvieNeural",
    "fr_ca_jean_male": "fr-CA-JeanNeural",
    "fr_ca_antoine_male": "fr-CA-AntoineNeural",
    "fr_ca_thierry_male": "fr-CA-ThierryNeural",
    "fr_ch_ariane_female": "fr-CH-ArianeNeural",
    "fr_ch_fabrice_male": "fr-CH-FabriceNeural",
    "fr_fr_denise_female": "fr-FR-DeniseNeural",
    "fr_fr_henri_male": "fr-FR-HenriNeural",
    "fr_fr_viviennemultilingual4_female": "fr-FR-VivienneMultilingualNeural4",
    "fr_fr_remymultilingual4_male": "fr-FR-RemyMultilingualNeural4",
    "fr_fr_lucienmultilingual4_male": "fr-FR-LucienMultilingualNeural4",
    "fr_fr_alain_male": "fr-FR-AlainNeural",
    "fr_fr_brigitte_female": "fr-FR-BrigitteNeural",
    "fr_fr_celeste_female": "fr-FR-CelesteNeural",
    "fr_fr_claude_male": "fr-FR-ClaudeNeural",
    "fr_fr_coralie_female": "fr-FR-CoralieNeural",
    "fr_fr_jacqueline_female": "fr-FR-JacquelineNeural",
    "fr_fr_jerome_male": "fr-FR-JeromeNeural",
    "fr_fr_josephine_female": "fr-FR-JosephineNeural",
    "fr_fr_maurice_male": "fr-FR-MauriceNeural",
    "fr_fr_yves_male": "fr-FR-YvesNeural",
    "fr_fr_yvette_female": "fr-FR-YvetteNeural",
    "ga_ie_orla3_female": "ga-IE-OrlaNeural3",
    "ga_ie_colm3_male": "ga-IE-ColmNeural3",
    "gl_es_sabela3_female": "gl-ES-SabelaNeural3",
    "gl_es_roi3_male": "gl-ES-RoiNeural3",
    "gu_in_dhwani_female": "gu-IN-DhwaniNeural",
    "gu_in_niranjan_male": "gu-IN-NiranjanNeural",
    "he_il_hila_female": "he-IL-HilaNeural",
    "he_il_avri_male": "he-IL-AvriNeural",
    "hi_in_aarav_male": "hi-IN-AaravNeural",
    "hi_in_ananya_female": "hi-IN-AnanyaNeural",
    "hi_in_aarti_female": "hi-IN-AartiNeural",
    "hi_in_arjun_male": "hi-IN-ArjunNeural",
    "hi_in_kavya_female": "hi-IN-KavyaNeural",
    "hi_in_kunal_male": "hi-IN-KunalNeural",
    "hi_in_rehaan_male": "hi-IN-RehaanNeural",
    "hi_in_swara_female": "hi-IN-SwaraNeural",
    "hi_in_madhur_male": "hi-IN-MadhurNeural",
    "hr_hr_gabrijela_female": "hr-HR-GabrijelaNeural",
    "hr_hr_srecko_male": "hr-HR-SreckoNeural",
    "hu_hu_noemi_female": "hu-HU-NoemiNeural",
    "hu_hu_tamas_male": "hu-HU-TamasNeural",
    "hy_am_anahit3_female": "hy-AM-AnahitNeural3",
    "hy_am_hayk3_male": "hy-AM-HaykNeural3",
    "id_id_gadis_female": "id-ID-GadisNeural",
    "id_id_ardi_male": "id-ID-ArdiNeural",
    "is_is_gudrun3_female": "is-IS-GudrunNeural3",
    "is_is_gunnar3_male": "is-IS-GunnarNeural3",
    "it_it_elsa_female": "it-IT-ElsaNeural",
    "it_it_isabella_female": "it-IT-IsabellaNeural",
    "it_it_diego_male": "it-IT-DiegoNeural",
    "it_it_alessiomultilingual4_male": "it-IT-AlessioMultilingualNeural4",
    "it_it_isabellamultilingual4_female": "it-IT-IsabellaMultilingualNeural4",
    "it_it_giuseppemultilingual4_male": "it-IT-GiuseppeMultilingualNeural4",
    "it_it_marcellomultilingual4_male": "it-IT-MarcelloMultilingualNeural4",
    "it_it_benigno_male": "it-IT-BenignoNeural",
    "it_it_calimero_male": "it-IT-CalimeroNeural",
    "it_it_cataldo_male": "it-IT-CataldoNeural",
    "it_it_fabiola_female": "it-IT-FabiolaNeural",
    "it_it_fiamma_female": "it-IT-FiammaNeural",
    "it_it_gianni_male": "it-IT-GianniNeural",
    "it_it_giuseppe_male": "it-IT-GiuseppeNeural",
    "it_it_imelda_female": "it-IT-ImeldaNeural",
    "it_it_irma_female": "it-IT-IrmaNeural",
    "it_it_lisandro_male": "it-IT-LisandroNeural",
    "it_it_palmira_female": "it-IT-PalmiraNeural",
    "it_it_rinaldo_male": "it-IT-RinaldoNeural",
    "ns_ca_siqiniq3_female": "ns-CA-SiqiniqNeural3",
    "ns_ca_taqqiq3_male": "ns-CA-TaqqiqNeural3",
    "tn_ca_siqiniq3_female": "tn-CA-SiqiniqNeural3",
    "tn_ca_taqqiq3_male": "tn-CA-TaqqiqNeural3",
    "ja_jp_nanami_female": "ja-JP-NanamiNeural",
    "ja_jp_keita_male": "ja-JP-KeitaNeural",
    "ja_jp_aoi_female": "ja-JP-AoiNeural",
    "ja_jp_daichi_male": "ja-JP-DaichiNeural",
    "ja_jp_mayu_female": "ja-JP-MayuNeural",
    "ja_jp_naoki_male": "ja-JP-NaokiNeural",
    "ja_jp_shiori_female": "ja-JP-ShioriNeural",
    "jv_id_siti3_female": "jv-ID-SitiNeural3",
    "jv_id_dimas3_male": "jv-ID-DimasNeural3",
    "ka_ge_eka3_female": "ka-GE-EkaNeural3",
    "ka_ge_giorgi3_male": "ka-GE-GiorgiNeural3",
    "kk_kz_aigul3_female": "kk-KZ-AigulNeural3",
    "kk_kz_daulet3_male": "kk-KZ-DauletNeural3",
    "km_kh_sreymom3_female": "km-KH-SreymomNeural3",
    "km_kh_piseth3_male": "km-KH-PisethNeural3",
    "kn_in_sapna3_female": "kn-IN-SapnaNeural3",
    "kn_in_gagan3_male": "kn-IN-GaganNeural3",
    "ko_kr_sunhi_female": "ko-KR-SunHiNeural",
    "ko_kr_injoon_male": "ko-KR-InJoonNeural",
    "ko_kr_hyunsumultilingual4_male": "ko-KR-HyunsuMultilingualNeural4",
    "ko_kr_bongjin_male": "ko-KR-BongJinNeural",
    "ko_kr_gookmin_male": "ko-KR-GookMinNeural",
    "ko_kr_hyunsu_male": "ko-KR-HyunsuNeural",
    "ko_kr_jimin_female": "ko-KR-JiMinNeural",
    "ko_kr_seohyeon_female": "ko-KR-SeoHyeonNeural",
    "ko_kr_soonbok_female": "ko-KR-SoonBokNeural",
    "ko_kr_yujin_female": "ko-KR-YuJinNeural",
    "lo_la_keomany3_female": "lo-LA-KeomanyNeural3",
    "lo_la_chanthavong3_male": "lo-LA-ChanthavongNeural3",
    "lt_lt_ona3_female": "lt-LT-OnaNeural3",
    "lt_lt_leonas3_male": "lt-LT-LeonasNeural3",
    "lv_lv_everita3_female": "lv-LV-EveritaNeural3",
    "lv_lv_nils3_male": "lv-LV-NilsNeural3",
    "mk_mk_marija3_female": "mk-MK-MarijaNeural3",
    "mk_mk_aleksandar3_male": "mk-MK-AleksandarNeural3",
    "ml_in_sobhana3_female": "ml-IN-SobhanaNeural3",
    "ml_in_midhun3_male": "ml-IN-MidhunNeural3",
    "mn_mn_yesui3_female": "mn-MN-YesuiNeural3",
    "mn_mn_bataa3_male": "mn-MN-BataaNeural3",
    "mr_in_aarohi_female": "mr-IN-AarohiNeural",
    "mr_in_manohar_male": "mr-IN-ManoharNeural",
    "ms_my_yasmin_female": "ms-MY-YasminNeural",
    "ms_my_osman_male": "ms-MY-OsmanNeural",
    "mt_mt_grace3_female": "mt-MT-GraceNeural3",
    "mt_mt_joseph3_male": "mt-MT-JosephNeural3",
    "my_mm_nilar3_female": "my-MM-NilarNeural3",
    "my_mm_thiha3_male": "my-MM-ThihaNeural3",
    "nb_no_pernille_female": "nb-NO-PernilleNeural",
    "nb_no_finn_male": "nb-NO-FinnNeural",
    "nb_no_iselin_female": "nb-NO-IselinNeural",
    "ne_np_hemkala3_female": "ne-NP-HemkalaNeural3",
    "ne_np_sagar3_male": "ne-NP-SagarNeural3",
    "nl_be_dena_female": "nl-BE-DenaNeural",
    "nl_be_arnaud_male": "nl-BE-ArnaudNeural",
    "nl_nl_fenna_female": "nl-NL-FennaNeural",
    "nl_nl_maarten_male": "nl-NL-MaartenNeural",
    "nl_nl_colette_female": "nl-NL-ColetteNeural",
    "or_in_subhasini3_female": "or-IN-SubhasiniNeural3",
    "or_in_sukant3_male": "or-IN-SukantNeural3",
    "pa_in_ojas3_male": "pa-IN-OjasNeural3",
    "pa_in_vaani3_female": "pa-IN-VaaniNeural3",
    "pl_pl_agnieszka_female": "pl-PL-AgnieszkaNeural",
    "pl_pl_marek_male": "pl-PL-MarekNeural",
    "pl_pl_zofia_female": "pl-PL-ZofiaNeural",
    "ps_af_latifa3_female": "ps-AF-LatifaNeural3",
    "ps_af_gulnawaz3_male": "ps-AF-GulNawazNeural3",
    "pt_br_francisca_female": "pt-BR-FranciscaNeural",
    "pt_br_antonio_male": "pt-BR-AntonioNeural",
    "pt_br_maceriomultilingual4_male": "pt-BR-MacerioMultilingualNeural4",
    "pt_br_thalitamultilingual4_female": "pt-BR-ThalitaMultilingualNeural4",
    "pt_br_brenda_female": "pt-BR-BrendaNeural",
    "pt_br_donato_male": "pt-BR-DonatoNeural",
    "pt_br_elza_female": "pt-BR-ElzaNeural",
    "pt_br_fabio_male": "pt-BR-FabioNeural",
    "pt_br_giovanna_female": "pt-BR-GiovannaNeural",
    "pt_br_humberto_male": "pt-BR-HumbertoNeural",
    "pt_br_julio_male": "pt-BR-JulioNeural",
    "pt_br_leila_female": "pt-BR-LeilaNeural",
    "pt_br_manuela_female": "pt-BR-ManuelaNeural",
    "pt_br_nicolau_male": "pt-BR-NicolauNeural",
    "pt_br_thalita_female": "pt-BR-ThalitaNeural",
    "pt_br_valerio_male": "pt-BR-ValerioNeural",
    "pt_br_yara_female": "pt-BR-YaraNeural",
    "pt_pt_raquel_female": "pt-PT-RaquelNeural",
    "pt_pt_duarte_male": "pt-PT-DuarteNeural",
    "pt_pt_fernanda_female": "pt-PT-FernandaNeural",
    "ro_ro_alina_female": "ro-RO-AlinaNeural",
    "ro_ro_emil_male": "ro-RO-EmilNeural",
    "ru_ru_svetlana_female": "ru-RU-SvetlanaNeural",
    "ru_ru_dmitry_male": "ru-RU-DmitryNeural",
    "ru_ru_dariya_female": "ru-RU-DariyaNeural",
    "si_lk_thilini3_female": "si-LK-ThiliniNeural3",
    "si_lk_sameera3_male": "si-LK-SameeraNeural3",
    "sk_sk_viktoria_female": "sk-SK-ViktoriaNeural",
    "sk_sk_lukas_male": "sk-SK-LukasNeural",
    "sl_si_petra_female": "sl-SI-PetraNeural",
    "sl_si_rok_male": "sl-SI-RokNeural",
    "so_so_ubax3_female": "so-SO-UbaxNeural3",
    "so_so_muuse3_male": "so-SO-MuuseNeural3",
    "sq_al_anila3_female": "sq-AL-AnilaNeural3",
    "sq_al_ilir3_male": "sq-AL-IlirNeural3",
    "tn_rs_nicholas3_male": "tn-RS-NicholasNeural3",
    "tn_rs_sophie3_female": "tn-RS-SophieNeural3",
    "sr_rs_sophie3_female": "sr-RS-SophieNeural3",
    "sr_rs_nicholas3_male": "sr-RS-NicholasNeural3",
    "su_id_tuti3_female": "su-ID-TutiNeural3",
    "su_id_jajang3_male": "su-ID-JajangNeural3",
    "sv_se_sofie_female": "sv-SE-SofieNeural",
    "sv_se_mattias_male": "sv-SE-MattiasNeural",
    "sv_se_hillevi_female": "sv-SE-HilleviNeural",
    "sw_ke_zuri3_female": "sw-KE-ZuriNeural3",
    "sw_ke_rafiki3_male": "sw-KE-RafikiNeural3",
    "sw_tz_rehema_female": "sw-TZ-RehemaNeural",
    "sw_tz_daudi_male": "sw-TZ-DaudiNeural",
    "ta_in_pallavi_female": "ta-IN-PallaviNeural",
    "ta_in_valluvar_male": "ta-IN-ValluvarNeural",
    "ta_lk_saranya_female": "ta-LK-SaranyaNeural",
    "ta_lk_kumar_male": "ta-LK-KumarNeural",
    "ta_my_kani_female": "ta-MY-KaniNeural",
    "ta_my_surya_male": "ta-MY-SuryaNeural",
    "ta_sg_venba_female": "ta-SG-VenbaNeural",
    "ta_sg_anbu_male": "ta-SG-AnbuNeural",
    "te_in_shruti_female": "te-IN-ShrutiNeural",
    "te_in_mohan_male": "te-IN-MohanNeural",
    "th_th_premwadee_female": "th-TH-PremwadeeNeural",
    "th_th_niwat_male": "th-TH-NiwatNeural",
    "th_th_achara_female": "th-TH-AcharaNeural",
    "tr_tr_emel_female": "tr-TR-EmelNeural",
    "tr_tr_ahmet_male": "tr-TR-AhmetNeural",
    "uk_ua_polina_female": "uk-UA-PolinaNeural",
    "uk_ua_ostap_male": "uk-UA-OstapNeural",
    "ur_in_gul_female": "ur-IN-GulNeural",
    "ur_in_salman_male": "ur-IN-SalmanNeural",
    "ur_pk_uzma_female": "ur-PK-UzmaNeural",
    "ur_pk_asad_male": "ur-PK-AsadNeural",
    "uz_uz_madina3_female": "uz-UZ-MadinaNeural3",
    "uz_uz_sardor3_male": "uz-UZ-SardorNeural3",
    "vi_vn_hoaimy_female": "vi-VN-HoaiMyNeural",
    "vi_vn_namminh_male": "vi-VN-NamMinhNeural",
    "uu_cn_xiaotong3_female": "uu-CN-XiaotongNeural3",
    "uu_cn_yunzhe3_male": "uu-CN-YunzheNeural3",
    "ue_cn_xiaomin3_female": "ue-CN-XiaoMinNeural3",
    "ue_cn_yunsong3_male": "ue-CN-YunSongNeural3",
    "zh_cn_xiaoxiao_female": "zh-CN-XiaoxiaoNeural",
    "zh_cn_yunxi_male": "zh-CN-YunxiNeural",
    "zh_cn_yunjian_male": "zh-CN-YunjianNeural",
    "zh_cn_xiaoyi_female": "zh-CN-XiaoyiNeural",
    "zh_cn_yunyang_male": "zh-CN-YunyangNeural",
    "zh_cn_xiaochen_female": "zh-CN-XiaochenNeural",
    "zh_cn_xiaochenmultilingual4_female": "zh-CN-XiaochenMultilingualNeural4",
    "zh_cn_xiaohan_female": "zh-CN-XiaohanNeural",
    "zh_cn_xiaomeng_female": "zh-CN-XiaomengNeural",
    "zh_cn_xiaomo_female": "zh-CN-XiaomoNeural",
    "zh_cn_xiaoqiu_female": "zh-CN-XiaoqiuNeural",
    "zh_cn_xiaorou_female": "zh-CN-XiaorouNeural",
    "zh_cn_xiaorui_female": "zh-CN-XiaoruiNeural",
    "zh_cn_xiaoxiaodialects_female": "zh-CN-XiaoxiaoDialectsNeural",
    "zh_cn_xiaoxiaomultilingual4_female": "zh-CN-XiaoxiaoMultilingualNeural4",
    "zh_cn_xiaoyan_female": "zh-CN-XiaoyanNeural",
    "zh_cn_xiaoyumultilingual4_female": "zh-CN-XiaoyuMultilingualNeural4",
    "zh_cn_xiaozhen_female": "zh-CN-XiaozhenNeural",
    "zh_cn_yunfeng_male": "zh-CN-YunfengNeural",
    "zh_cn_yunhao_male": "zh-CN-YunhaoNeural",
    "zh_cn_yunjie_male": "zh-CN-YunjieNeural",
    "zh_cn_yunxia_male": "zh-CN-YunxiaNeural",
    "zh_cn_yunxiaomultilingual4_male": "zh-CN-YunxiaoMultilingualNeural4",
    "zh_cn_yunye_male": "zh-CN-YunyeNeural",
    "zh_cn_yunyimultilingual4_male": "zh-CN-YunyiMultilingualNeural4",
    "zh_cn_yunze_male": "zh-CN-YunzeNeural",
    "zh_hk_hiumaan_female": "zh-HK-HiuMaanNeural",
    "zh_hk_wanlung_male": "zh-HK-WanLungNeural",
    "zh_hk_hiugaai_female": "zh-HK-HiuGaaiNeural",
    "zh_tw_hsiaochen_female": "zh-TW-HsiaoChenNeural",
    "zh_tw_yunjhe_male": "zh-TW-YunJheNeural",
    "zh_tw_hsiaoyu_female": "zh-TW-HsiaoYuNeural",
    "zu_za_thando3_female": "zu-ZA-ThandoNeural3",
    "zu_za_themba3_male": "zu-ZA-ThembaNeural3",
}


def generate_tts(text, voice):
    async def run():
        communicate = edge_tts.Communicate(text, voice)
        tmp = tempfile.NamedTemporaryFile(delete=False, suffix=".mp3")
        await communicate.save(tmp.name)
        return tmp.name

    return asyncio.run(run())

@app.route("/tts", methods=["GET"])
def tts():
    text = request.args.get("text")
    voice_id = request.args.get("voice", "jenny").lower()

    if not text:
        return jsonify({"error": "text is required"}), 400

    if voice_id not in VOICES:
        return jsonify({
            "error": "Invalid voice",
            "available_voices": list(VOICES.keys())
        }), 400

    audio_file = generate_tts(text, VOICES[voice_id])

    try:
        return send_file(audio_file, mimetype="audio/mpeg")
    finally:
        os.unlink(audio_file)

@app.route("/voices", methods=["GET"])
def voices():
    return jsonify(VOICES)

if __name__ == "__main__":
    app.run(port=5000, debug=True)
